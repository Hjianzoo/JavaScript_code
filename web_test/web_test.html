<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="./css/login.css" rel="stylesheet">
	<script src="./js/zepto.js"></script>
	<title>Login</title>
</head>
<body>
	<div class="login">
		<div class="usercell">
			<p>	用户：</p>
				<input id="user" type="text" placeholder="请输入用户名">
		</div>
		<br>
		<div class="pwdcell">
			<p>密码:</p>
			<input id = "pwd" type="password" placeholder="请输入密码">
		</div>
		<br>
		<div class="logincell">
			<button id="login_in">登&nbsp;录</button>
		</div>
	</div>
	<div class="error hide">
		<p>用户名或密码错误</p>
		<button id="iKnow">我知道了</button>
	</div>
	<div class = "mask hide"></div>
</body>
<script>
	$("#iKnow").on("click",function(){
		$(".error").removeClass("show").addClass("hide")
		$(".mask").removeClass("show").addClass("hide")
	})
	$("#login_in").on("click",function(){
		var data = {};
		data.username = $("#user").val();
		data.userpwd = $("#pwd").val();
		var dataStr = JSON.stringify(data);
		console.log(dataStr);
		$.post('/api/login',{data:dataStr},function(res){
			if(res.login == 'ok'){
				window.location.href="index.html";
			}
			else{
				$(".error").removeClass("hide").addClass("show");
				$(".mask").removeClass("hide").addClass("show");
				window.location.href="index.html";
			}
		})
	})
</script>
</html>